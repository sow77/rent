RewriteEngine On

# Redirigir HTTP a HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Reglas de reescritura para URLs amigables
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rutas principales
RewriteRule ^vehicles/?$ index.php?page=vehicles [L,QSA]
RewriteRule ^boats/?$ index.php?page=boats [L,QSA]
RewriteRule ^transfers/?$ index.php?page=transfers [L,QSA]
RewriteRule ^admin/?$ index.php?page=admin [L,QSA]
RewriteRule ^login/?$ index.php?page=login [L,QSA]
RewriteRule ^register/?$ index.php?page=register [L,QSA]
RewriteRule ^profile/?$ index.php?page=profile [L,QSA]
RewriteRule ^reservations/?$ index.php?page=reservations [L,QSA]

# Rutas con parámetros
RewriteRule ^vehicles/([0-9a-f-]+)/?$ index.php?page=vehicles&action=show&id=$1 [L,QSA]
RewriteRule ^boats/([0-9]+)/?$ index.php?page=boats&action=show&id=$1 [L,QSA]
RewriteRule ^transfers/([0-9]+)/?$ index.php?page=transfers&action=show&id=$1 [L,QSA]

# Búsquedas
RewriteRule ^vehicles/search/?$ index.php?page=vehicles&action=search [L,QSA]
RewriteRule ^boats/search/?$ index.php?page=boats&action=search [L,QSA]
RewriteRule ^transfers/search/?$ index.php?page=transfers&action=search [L,QSA]

# APIs
RewriteRule ^api/(.*)$ api/$1 [L,QSA]

# Archivos estáticos
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)$ $1 [L]

# Página por defecto
RewriteRule ^$ index.php [L,QSA]

# Error 404
ErrorDocument 404 /404.php